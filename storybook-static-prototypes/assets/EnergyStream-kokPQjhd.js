import{j as c}from"./jsx-runtime-Cg9Rjbrl.js";import{c as w}from"./utils-CBfrqCZ4.js";import{r as i}from"./iframe-2XHsiRoU.js";import{v as g}from"./vibe-config-CODbg9Aj.js";const b=50,f=8;function j({vibeCounts:d}){const[m,h]=i.useState([]),s=i.useRef(null),[l,p]=i.useState(null);return i.useEffect(()=>{const e=new ResizeObserver(t=>{if(!t||t.length===0)return;const{width:n,height:a}=t[0].contentRect;p({width:n,height:a})});return s.current&&e.observe(s.current),()=>e.disconnect()},[]),i.useEffect(()=>{if(!l||l.width===0)return;const e=Object.values(d).reduce((n,a)=>n+(a||0),0);if(e===0){h([]);return}const t=Object.entries(d).flatMap(([n,a])=>{const v=e>0?(a||0)/e:0,r=Math.round(v*Math.min(e,b));return Array.from({length:r},(u,o)=>({id:`${n}-${o}-${Math.random()}`,vibeType:n,x:Math.random()*(l.width-f),y:Math.random()*(l.height-f),vx:(Math.random()-.5)*.1,vy:(Math.random()-.5)*.1}))});h(t)},[d,l]),i.useEffect(()=>{let e;const t=()=>{if(s.current){const{width:n,height:a}=s.current.getBoundingClientRect();h(v=>v.map(r=>{let u=r.x+r.vx,o=r.y+r.vy,x=r.vx,y=r.vy;return(u<=0||u>=n-f)&&(x=-x),(o<=0||o>=a-f)&&(y=-y),{...r,x:u,y:o,vx:x,vy:y}}))}e=requestAnimationFrame(t)};return m.length>0&&(e=requestAnimationFrame(t)),()=>cancelAnimationFrame(e)},[m.length]),c.jsxs("div",{ref:s,className:"relative h-2 w-full overflow-hidden min-h-[24px]",children:[m.map(e=>{const t=g[e.vibeType];if(!t)return null;const{dotColor:n}=t;return c.jsx("div",{className:"absolute",style:{transform:`translate(${e.x}px, ${e.y}px)`},children:c.jsx("div",{className:w("h-2 w-2 rounded-full",n)})},e.id)}),m.length===0&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsx("p",{className:"text-xs text-neutral-400",children:"Be the first to share a vibe"})})]})}j.__docgenInfo={description:"",methods:[],displayName:"EnergyStream",props:{vibeCounts:{required:!0,tsType:{name:"Partial",elements:[{name:"Record",elements:[{name:"union",raw:"keyof typeof vibeConfig",elements:[{name:"literal",value:"flow"},{name:"literal",value:"joy"},{name:"literal",value:"hype"},{name:"literal",value:"warmth"},{name:"literal",value:"glow"},{name:"literal",value:"reflect"},{name:"literal",value:"love"}]},{name:"number"}],raw:"Record<VibeType, number>"}],raw:"Partial<Record<VibeType, number>>"},description:""}}};export{j as E};
